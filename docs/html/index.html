<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ChatProgramm_Final: ChatProgramm_Final</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ChatProgramm_Final
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('index.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ChatProgramm_Final </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a></p>
<p>A decentralized, peer-to-peer chat application developed in Python for the <b>Betriebssysteme und Rechnernetze</b> (Operating Systems and Computer Networks) course. This project implements a custom protocol called SLCP (Simple Local Chat Protocol) to demonstrate real-time communication over local networks without relying on central servers.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md1"></a>
Project Description</h1>
<p>The project aims to simulate a real-world decentralized chat application that supports direct peer-to-peer communication without relying on a central server. By using both UDP and TCP sockets, the system enables:</p><ul>
<li>Dynamic discovery of other peers</li>
<li>Text-based chat communication</li>
<li>Image file sharing</li>
<li>Away-from-keyboard (AFK) autoreply functionality</li>
<li>Two fully-featured interfaces: a command-line interface (CLI) and a graphical user interface (GUI)</li>
</ul>
<p>This system mirrors the principles of modern decentralized applications where reliability, independence, and peer autonomy are key. The communication protocol (SLCP) was developed specifically for this project, ensuring messages are structured, lightweight, and interpretable.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md2"></a>
Challenges Faced</h2>
<p>Developing a decentralized peer-to-peer application came with several challenges:</p><ul>
<li><b>Concurrency Management:</b> Synchronizing multiple processes (network, discovery, GUI, CLI) required careful use of multiprocessing, threading, and pipes.</li>
<li><b>Peer Discovery:</b> Broadcasting JOIN and WHO messages while avoiding duplicate peers or stale data demanded a reliable protocol logic.</li>
<li><b>Image Transfer:</b> Transferring large binary files over TCP while signaling over UDP required a clean and fail-safe handshaking mechanism.</li>
<li><b>Interface Parity:</b> Maintaining full feature parity between CLI and GUI was non-trivial, especially with user interactions.</li>
<li><b>AFK Logic:</b> Automatically replying with a custom message while avoiding spam loops required careful state tracking.</li>
<li><b>Cross-platform Compatibility:</b> Ensuring the system runs reliably on Windows, macOS, and Linux involved path handling, port availability checks, and encoding robustness.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md4"></a>
Features</h1>
<ul>
<li><b>Peer Discovery:</b> Broadcast-based peer discovery using <span class="tt">JOIN</span>, <span class="tt">WHO</span>, and <span class="tt">KNOWUSERS</span> messages.</li>
<li><b>Message Exchange:</b> Real-time message delivery over UDP.</li>
<li><b>Image Transfer:</b> TCP-based file transfer with UDP notification handshakes.</li>
<li><b>AFK Mode:</b> Automatic autoreplies when a user is away.</li>
<li><b>Graphical Interface:</b> Built using PyQt5 with dark/light theme support.</li>
<li><b>Settings Dialog:</b> Runtime configuration for user handle, port, autoreply message, and image folder.</li>
<li><b>CLI Interface:</b> Text-based command-line chat interface with full feature parity.</li>
<li><b>Fully Documented:</b> Comprehensive technical documentation generated using Doxygen.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md6"></a>
Architecture</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md7"></a>
GUI-Based Execution Flow</h2>
<p><img src="./docs/diagrams/Diagram_Gui.png" alt="GUI Sequence Diagram" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md8"></a>
CLI-Based Execution Flow</h2>
<p><img src="./docs/diagrams/Diagram_Cli.png" alt="CLI Sequence Diagram" class="inline"/></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md9"></a>
Core Modules</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Module  </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">main.py</span>  </td><td class="markdownTableBodyNone">Application entry point with GUI interface  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">cli.py</span>  </td><td class="markdownTableBodyNone">Alternative CLI-based interface  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">discovery.py</span>  </td><td class="markdownTableBodyNone">Broadcast-based peer discovery logic  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">network.py</span>  </td><td class="markdownTableBodyNone">Handles UDP messaging, AFK logic, TCP images  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">gui.py</span>  </td><td class="markdownTableBodyNone">PyQt5-based user interface logic  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">config.toml</span>  </td><td class="markdownTableBodyNone">TOML configuration for clients and settings  </td></tr>
</table>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md11"></a>
Team and Responsibilities</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name  </th><th class="markdownTableHeadNone">Matrikelnummer  </th><th class="markdownTableHeadNone">Responsibilities  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Aashir Ahtisham</b>  </td><td class="markdownTableBodyNone">1447390  </td><td class="markdownTableBodyNone">Main contributor to <span class="tt">discovery.py</span>, contributed to <span class="tt">network.py</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Bratli Metuka</b>  </td><td class="markdownTableBodyNone">1505429  </td><td class="markdownTableBodyNone">Main contributor to <span class="tt">network.py</span>, helped with <span class="tt">gui.py</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Jalal Eddin Alhaj Ahmad</b>  </td><td class="markdownTableBodyNone">1428348  </td><td class="markdownTableBodyNone">Main contributor to <span class="tt">cli.py</span> and <span class="tt">gui.py</span>, also worked on <span class="tt">discovery.py</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Joseph Bola√±os Beyloune</b>  </td><td class="markdownTableBodyNone">1534591  </td><td class="markdownTableBodyNone">Main contributor to documentation, contributed to <span class="tt">cli.py</span>, <span class="tt">gui.py</span>, <span class="tt">network.py</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>√ñmer Faruk Capraz</b>  </td><td class="markdownTableBodyNone">1522507  </td><td class="markdownTableBodyNone">Main contributor to documentation, helped with <span class="tt">discovery.py</span> and <span class="tt">cli.py</span>  </td></tr>
</table>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md13"></a>
Installation &amp; Setup</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md14"></a>
1. Install Python 3.10+</h2>
<p>Check your version:</p>
<div class="fragment"><div class="line">python3 --version</div>
</div><!-- fragment --><p>If it's lower than 3.10, update it via your platform's instructions.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md15"></a>
2. Install Dependencies</h2>
<p>Use <span class="tt">pip</span> to install the required packages:</p>
<div class="fragment"><div class="line">pip install PyQt5 toml qdarkstyle</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
Required Packages</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Package  </th><th class="markdownTableHeadNone">Purpose  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>PyQt5</b>  </td><td class="markdownTableBodyNone">GUI framework (required for <span class="tt">main.py</span>)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>toml</b>  </td><td class="markdownTableBodyNone">Configuration file parser  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>qdarkstyle</b>  </td><td class="markdownTableBodyNone">Optional dark mode for GUI theme  </td></tr>
</table>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md18"></a>
3. Configure Clients</h2>
<p>Update the <span class="tt">config.toml</span> file to define your client settings:</p>
<div class="fragment"><div class="line">[[clients]]</div>
<div class="line">handle = &quot;Aashir&quot;</div>
<div class="line">port = [5008, 6000]</div>
<div class="line">whoisport = 4000</div>
<div class="line">autoreply = &quot;Back in one hour&quot;</div>
<div class="line">away = false</div>
<div class="line">imagepath = &quot;./images/aashir&quot;</div>
</div><!-- fragment --><p>Each client must have a unique <span class="tt">handle</span>, and ports must not conflict.</p>
<p>The clients can also be updated after the application was launched.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md20"></a>
4. Launch the Application</h2>
<p>To run with the GUI:</p>
<div class="fragment"><div class="line">python3 main.py Aashir</div>
</div><!-- fragment --><p>To run via CLI:</p>
<div class="fragment"><div class="line">python3 cli.py Aashir</div>
</div><!-- fragment --><p>Replace <span class="tt">"Aashir"</span> with any configured handle in <span class="tt">config.toml</span>.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md22"></a>
Platform-Specific Instructions</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md23"></a>
Windows</h2>
<ul>
<li>Use <b>PowerShell</b> or <b>CMD</b>.</li>
<li>Ensure Python is added to PATH.</li>
<li>Use <span class="tt">python</span> instead of <span class="tt">python3</span> if needed.</li>
</ul>
<div class="fragment"><div class="line">python main.py Aashir</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md24"></a>
macOS</h2>
<ul>
<li>Open <b>Terminal</b>.</li>
<li>Use the default Python 3 installation (or via Homebrew).</li>
</ul>
<div class="fragment"><div class="line">python3 main.py Aashir</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md25"></a>
Linux (Ubuntu/Debian)</h2>
<ul>
<li>Open <b>Terminal</b>.</li>
<li>Make sure Python 3 and pip are installed:</li>
</ul>
<div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt install python3 python3-pip</div>
</div><!-- fragment --><ul>
<li>Install dependencies:</li>
</ul>
<div class="fragment"><div class="line">pip3 install PyQt5 toml qdarkstyle</div>
</div><!-- fragment --><ul>
<li>Run the application:</li>
</ul>
<div class="fragment"><div class="line">python3 main.py Aashir</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md27"></a>
GUI Controls</h1>
<ul>
<li><b>Send Message</b>: Press Enter or click "Send"</li>
<li><b>Send Image</b>: Select an image via "Send Image" button</li>
<li><b>Clients</b>: Show connected peers</li>
<li><b>AFK Toggle</b>: Enable/disable AFK autoreply</li>
<li><b>Settings</b>: Edit configuration interactively</li>
<li><b>Leave Chat</b>: Graceful exit</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md29"></a>
Testing</h1>
<p>You can simulate multiple clients by:</p><ul>
<li>Opening multiple terminal sessions with different handles</li>
<li>Running on separate machines in the same LAN</li>
<li>Observing image transfers and peer join/leave messages</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md31"></a>
Documentation</h1>
<p>Doxygen documentation is located at:</p>
<div class="fragment"><div class="line">docs/html/index.html</div>
</div><!-- fragment --><p>To regenerate:</p>
<div class="fragment"><div class="line">doxygen Doxyfile</div>
</div><!-- fragment --><p>The documentation includes:</p><ul>
<li>Function and class reference</li>
<li>Namespace and file structure</li>
<li>Inline code documentation</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md33"></a>
Technologies</h1>
<ul>
<li><b>Python 3.10+</b> <br  />
 The main programming language used for the entire application. Python's high-level syntax and standard library make it ideal for rapid development and academic projects.</li>
<li><b>PyQt5</b> <br  />
 Used to create the graphical user interface (GUI). Offers support for event-driven programming through signals and slots, as well as cross-platform compatibility.</li>
<li><b>TOML</b> <br  />
 A minimal and human-readable configuration file format used to define client settings such as handles, ports, autoreplies, and image directories.</li>
<li><b>Socket Programming (UDP/TCP)</b> <br  />
 Enables real-time communication between peers. UDP is used for message broadcasting (<span class="tt">JOIN</span>, <span class="tt">WHO</span>, <span class="tt">MSG</span>, etc.), while TCP is used for transferring binary image files.</li>
<li><b>Doxygen</b> <br  />
 Automatically generates HTML-based technical documentation from docstrings and markdown files such as <span class="tt">README.md</span>.</li>
<li><b>Multiprocessing Pipes (<span class="tt">multiprocessing.Pipe</span>)</b> <br  />
 Used for inter-process communication (IPC) between the GUI/CLI and the network process. Allows sending structured messages like <span class="tt">(MSG, handle, message)</span> through unidirectional or bidirectional channels.</li>
<li><b>Threads (<span class="tt">threading.Thread</span>)</b> <br  />
 Used for non-blocking background tasks like periodic broadcasting (<span class="tt">JOIN</span>, <span class="tt">WHO</span>) and image transfers. Ensures responsiveness of the GUI and CLI.</li>
<li><b>Shared Memory (via <span class="tt">multiprocessing</span> state)</b> <br  />
 Certain configuration states (e.g., AFK status) and message buffers are indirectly synchronized across processes by sharing references during process creation.</li>
<li><b>QDarkStyle</b> <br  />
 A ready-made dark mode theme applied to the PyQt5 interface for improved aesthetics and readability.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md35"></a>
Security Notice</h1>
<p>This application is designed for academic purposes only. <br  />
 It does <b>not</b> implement encryption, authentication, or secure transport mechanisms. <br  />
 Use only on trusted local networks.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md37"></a>
License</h1>
<p>MIT License ‚Äì For educational use only. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
